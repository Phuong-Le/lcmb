{
    "$schema": "https://json-schema.org/draft/2020-12/schema",
    "$id": "https://raw.githubusercontent.com/nf-core/lcmb/master/nextflow_schema.json",
    "title": "nf-core/lcmb pipeline parameters",
    "description": "postprocessing of LCMB data",
    "type": "object",
    "$definitions": {
        "filter_snv_options": {
            "title": "Options specific to filter_snv subworkflow",
            "type": "object",
            "fa_icon": "fas fa-terminal",
            "required": ["snv_vcfilter_config", "snv_rho_threshold", "sigprofiler_genome", "hairpin2_input_snv_json", "hairpin2_name_mapping_snv", "min_good_reads", "max_K", "max_iter", "nchains", "clonal_threshold", "proportion_pass_clonality"],
            "properties": {
                "snv_vcfilter_config": {
                    "type": "string",
                    "format": "file-path",
                    "exists": true,
                    "mimetype": "text/plain",
                    "description": "Path to vcfilter config file, default to data/default/snv_default.filter",
                    "fa_icon": "far fa-file-code"
                },
                "snv_rho_threshold": {
                    "type": "number",
                    "description": "rho threshold below which variant is filtered out",
                    "default": 0.1
                },
                "sigprofiler_genome": {
                    "type": "string",
                    "description": "genome to input to sigprofiler"
                },
                "hairpin2_input_snv_json": {
                    "type": "string",
                    "format": "file-path",
                    "exists": true,
                    "mimetype": "text/plain",
                    "description": "Path to hairpin2 config file, default to data/default/hairpin2_input_snv.json",
                    "fa_icon": "far fa-file-code"
                },
                "hairpin2_name_mapping_snv": {
                    "type": "string",
                    "format": "file-path",
                    "exists": true,
                    "mimetype": "text/plain",
                    "description": "Path to hairpin2 name mapping file, default to data/default/hairpin2_name_mapping_snv.json",
                    "fa_icon": "far fa-file-code"
                },
                "min_good_reads": {
                    "type": "number",
                    "description": "the minimum number of good reads below which a variant is filtered out upstream to clonality (same as in hairpin2)",
                    "default": 3
                },
                "max_K": {
                    "type": "number",
                    "description": "maximum number of clusters to consider when estimating cluster peaks and weights, clonality test will trial K from 1 to max_K",
                    "default": 3
                },
                "max_iter": {
                    "type": "number",
                    "description": "maximum number of iterations post initiation for the clonality clustering algorithm before convergence is reached, each iteration samples 2000 parameter sets, including 1000 burn-in samples",
                    "default": 5
                },
                "nchains": {
                    "type": "number",
                    "description": "number of chains to run in parallel for the clonality clustering algorithm",
                    "default": 5
                },
                "clonal_threshold": {
                    "type": "number",
                    "description": "peak VAF below which a cluster is considered polyclonal",
                    "default": 0.25
                },
                "proportion_pass_clonality": {
                    "type": "number",
                    "description": "if the weights of the clusters with peak VAF above the clonal_threshold sum to less than this value, the sample is considered polyclonal",
                    "default": 0.9
                }
            }
        }
    },
    "allOf": [
        {
            "$ref": "#/$definitions/filter_snv_options"
        }
    ]
}
